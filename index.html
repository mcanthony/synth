<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Synth v.189</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link href='http://fonts.googleapis.com/css?family=Exo:100,200,400,500,700italic' rel='stylesheet' type='text/css'>
		<link href='css/style.css' rel='stylesheet' type='text/css'>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
		<script src="js/libs/jquery.ui.touch-punch.js"></script>
		<script src="js/libs/modernizr.custom.js"></script>
		<script src="js/libs/res.min.js"></script>
		<script src="js/libs/three.min.js"></script>
		<script src="js/libs/dancer.js"></script>
		<script src="js/libs/keypress-2.0.3.min.js"></script>
		<script src="js/Detector.js"></script>
		<script src="js/shaders/RuttShader.js"></script><!--This is where the magic happens-->
		<script src="js/shaders/HueSaturationShader.js"></script>
		<script src="js/shaders/ConvolutionShader.js"></script>
		<script src="js/shaders/CopyShader.js"></script>
		<script src="js/postprocessing/EffectComposer.js"></script>
		<script src="js/postprocessing/RenderPass.js"></script>
		<script src="js/postprocessing/MaskPass.js"></script>
		<script src="js/postprocessing/BloomPass.js"></script>
		<script src="js/postprocessing/HueSaturationPass.js"></script>
		<script src="js/postprocessing/ShaderPass.js"></script>

	</head>
	<body>
	<header>
	    <h1>Synth</h1>
	    <h2>A video synthesizer for the web.</h2>
		<a href="info/index.php">Learn More</a>
	</header>
	<!--<div id="topfill"></div>-->
 <div id="gui_container">
	<div id="video_drop">
		<ul id="videoplaylist"></ul>
		<h5 id="read_video">Load Video Files</h5>
	</div>
	<div id="drop_zone">
		<ul id="playlist"></ul>
		<h5 id="read_files">Load Audio Files</h5>
	</div>
	<audio id="audio" src="" controls="controls"></audio>
</div>

	<video id="video" src="" width="640" height="360" autoplay loop="loop" muted webkit-playsinline style="display:none"></video>
	<div id="play_button"></div>
	<div id="canvas"></div>

	<div id="container">
    <equalizer class="equalizer" id="equalizer1">
		<div class="wrapper"><div class="title">Waveform Select</div>
		<control class="control ui-widget-content" data-in1="0" data-in2="40" data-in3="80" data-in4="90" data-in5="100" data-in6="90" data-in7="80" data-in8="40" data-in9="0" data-in10="0"><ul class="bars"><li class="in10" data-index=""></li><li class="in9" data-index=""></li><li class="in8" data-index=""></li><li class="in7" data-index=""></li><li class="in6" data-index=""></li><li class="in5" data-index=""></li><li class="in4" data-index=""></li><li class="in3" data-index=""></li><li class="in2" data-index=""></li><li class="in1" data-index=""></li></ul></control>
		</div>
		</equalizer>
		<fader class="fader v"><div class="wrapper"><div class="title">3D-Warp</div>
		<control class="vert draggable control ui-widget-content" data-index="" data-key="oZ" data-value="0.0" data-start="4200.0" data-end="-4200.0"><point></point></control><div class="value"></div></div></fader>
		<joystick class="joystick joywarp">
		<div class="wrapper"><div class="title">2D-Warp</div>
		<control class="xy draggable control ui-widget-content" data-key1="oY" data-key2="oX" data-value="0.0" data-start="-4000.0" data-end="4000.0" data-multiply="2000.0"><point></point></control>
		<div class="value"></div>
		</div>
		</joystick>
	    <fader class="fader v"><div class="wrapper"><div class="title">Warp</div><control class="vert draggable control ui-widget-content" data-index="" data-key="displacement" data-value="0.0" data-start="20.0" data-end="-20.0"><point></point></control><div class="value"></div></div></fader>
	    <fader class="fader v"><div class="wrapper"><div class="title">Multiplier</div><control class="vert draggable control ui-widget-content" data-index="" data-key="multiply" data-value="0.0" data-start="20.0" data-end="0.0"><point></point></control><div class="value"></div></div></fader>
	    <fader class="fader v hue"><div class="wrapper"><div class="title">Hue</div><control class="vert draggable control ui-widget-content" data-index="" data-key="color" data-value="0.0" data-start="0.0" data-end="359.0"><point></point></control><div class="value"></div></div></fader>
	    <fader class="fader v sat"><div class="wrapper"><div class="title">Saturation</div><control class="vert draggable control ui-widget-content" data-index="" data-key="saturate" data-value="0.0" data-start="1.1" data-end="-1.1"><point></point></control><div class="value"></div></div></fader>
	    <fader class="fader v opacity"><div class="wrapper"><div class="title">Opacity</div><control class="vert draggable control ui-widget-content" data-index="" data-key="opacity" data-value="0.0" data-start="1.0" data-end="-0.05"><point></point></control><div class="value"></div></div></fader>
	  <!--  <picker class="picker v"><div class="wrapper"><canvas id="bgpicker"><control class="vert draggable control ui-widget-content" data-key="opacity" data-value="0.0" data-start="1.0" data-end="0.0"></control></div></picker>	 -->

<!--		<fader class="fader h" id="fader2">
		<div class="wrapper">
		<control class="hor draggable control ui-widget-content" data-key="opacity" data-value="0.5" data-start="0.0" data-end="1.0"><point></point></control>
		<div class="value"></div>
		</div>
		</fader> -->
	  <joystick class="joystick joycam">
		<div class="wrapper"><div class="title">Camera</div>
		<control class="xy draggable control ui-widget-content" data-key1="camY" data-key2="camX" data-value="0.0" data-start="4000.0" data-end="-4000.0" data-multiply="2000.0"><point></point></control>
		<div class="value"></div>
		</div>
		</joystick>
		<fader class="fader v"><div class="wrapper"><div class="title">Zoom</div><control class="vert draggable control ui-widget-content" data-index="" data-key="camZ" data-value="0.0" data-start="4000.0" data-end="-4000.0"><point></point></control><div class="value"></div></div></fader>
	    <fader class="fader v"><div class="wrapper"><div class="title">Scale</div><control class="vert draggable control ui-widget-content" data-index="" data-key="scaler" data-value="0.0" data-start="20.0" data-end="0.0"><point></point></control><div class="value"></div></div></fader>
		<div class="togglefarm">
		<toggle class="toggle model plane"><control class="control" data-key="plane" data-value="true"><img src="img/shapes-plane.png"></control></toggle>
		<toggle class="toggle model cube"><control class="control" data-key="cube" data-value="false"><img src="img/shapes-cube.png"></control></toggle>
		<toggle class="toggle model sphere"><control class="control" data-key="sphere" data-value="false"><img src="img/shapes-sphere.png"></control></toggle>
		<toggle class="toggle model cylinder"><control class="control" data-key="cylinder" data-value="false"><img src="img/shapes-cylinder.png"></control></toggle>
		<toggle class="toggle model torus"><control class="control" data-key="torus" data-value="false"><img src="img/shapes-torus.png"></control></toggle>
		<toggle class="toggle wire"><control class="control" data-key="wire" data-value="false">W</control></toggle>
		</div>
	</div>

	<script src="js/synth.js"></script>
	<script>

	 // TODO: Check for .json file in filesystem, if found load a specified preset.
   var s = new Synth(document.getElementById( 'canvas' ),true,[{
        "camera": "0.0,-1130.0,1680.0",
        "shape": "plane",
        "scale" : 10.0,
        "wireframe": false,
        "multiplier": 15.0,
        "displace": 3.3,
        "origin": "0,0,-2000.0",
        "opacity": 0.3,
        "hue": 0,
        "saturation": 0.7,
        "bgColor": "#000"
    }]);
   	s.fetchDefaults();
		s.defaultVideo('vid/kinetic-light.mp4');

		$('header').delay(7500).fadeOut("slow",function(){
			console.log(s.res);
	  	if (s.res.device === 'ipad' || s.res.device === 'iphone') {
    	  $('#play_button').show();
    	  $('#play_button').on('touchend', function() {
    	    s.videoInput.current = 0;
    	    s.playVideo(0);
    	    $('#play_button').hide();
    	  });
    	  $(document).on('touchmove', function(e) {
    			e.preventDefault();
				});
    	}
		});
	</script>
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-610740-9', 'kineticvideo.co');
	  ga('send', 'pageview');
	</script>

</body>
</html>
